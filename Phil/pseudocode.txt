Initialize the simulation with event, building_name, bot, email, and sandbox parameters
Get the initial state of the simulation
Initialize an empty dictionary to store the current directions of elevators
Calculate the middle floor of the building

While the simulation is running:
    Initialize an empty list to store commands for the current state
    For each elevator in the current state:
        Get the current direction of the elevator, default to UP if not set
        If the elevator is at the top floor, set direction to DOWN
        If the elevator is at the bottom floor, set direction to UP
        Update the direction of the elevator in the directions dictionary

        Set the default action to STOP

        If the elevator's current floor is in the list of buttons pressed:
            Set action to STOP (let passengers off)
        Else:
            For each request in the current state:
                If the request is for the current floor and matches the direction:
                    Set action to STOP (someone requested the current floor)
                    Break out of the loop
            Else:
                If there are any requests:
                    Set action to MOVE
                Else:
                    If the elevator is below the middle floor:
                        Set direction to UP
                        Set action to MOVE
                    If the elevator is above the middle floor:
                        Set direction to DOWN
                        Set action to MOVE

        Append a new command with the elevator's id, direction, and action to the commands list

    Send the commands to the simulation and update the current state

Print the final score and replay URL